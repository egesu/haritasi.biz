<?php

namespace App\Http\Controllers;

use Shibby\Loilerplate\Controller\BaseController;
use Carbon\Carbon;

class WebsiteController extends BaseController
{
    protected $parameters = [
        'siteTitle' => 'haritasi.biz',
        'siteDescription' => 'haritasi.biz',
        'pageTitle' => '',
    ];

    protected $og = [
        'type' => '',
        'title' => '',
        'image' => '',
        'url' => '',
        'video' => '',
    ];
    //use AuthorizesRequests, DispatchesJobs, ValidatesRequests;

    protected function setOg($type, $content)
    {
        if($type === 'image'){
            $this->og['image'][] = $content;
        }else{
            $this->og[$type] = $content;
        }
    }

    protected function setSiteTitle($title)
    {
        $this->setOg('title', $title);
        parent::setSiteTitle($title);
    }

    public function renderView($view, $params = [])
    {
        if(empty($this->og['url'])){
            $this->og['url'] = \Request::getUri();
        }
        $params['og'] = $this->og;
        $params['current_url'] = url()->current();
        $params['dateToday'] = Carbon::today()->formatLocalized('%d %B %Y');

        return parent::renderView($view, $params); // TODO: Change the autogenerated stub
    }
}
